kibot:
  version: 1

global:
  output: '%f_rev%r-%i.%x'
  variant: ''

preflight:
  run_erc: true
  run_drc: true
  check_zone_fills: true
  ignore_unconnected: false
  update_xml: true

outputs:
  # --------------------
  # Schematics
  # --------------------
  - name: 'print schema'
    comment: "Print schematic (PDF)"
    type: pdf_sch_print
    dir: docs
  - name: 'print schema'
    comment: "Print schematic (SVG)"
    type: svg_sch_print
    dir: docs/img
  - name: 'print board mechanics'
    comment: "Print board (PDF)"
    type: pdf_pcb_print
    layers:
      - Dwgs.User
      - Edge.Cuts
      - F.CrtYd
    dir: docs
    options:
      drill_marks: full
      output: '%f-mechanic.%x'
      plot_sheet_reference: true
  - name: 'print board documentation'
    comment: "Print board (PDF)"
    type: pdf_pcb_print
    layers: 
      - Edge.Cuts
      - Cmts.User
      - F.Fab
    dir: docs
    options:
      output: '%f-documentation.%x'
      plot_sheet_reference: true
  # --------------------
  # Images / Drawings
  # --------------------
  - name: 'https://github.com/yaqwsx/PcbDraw'
    comment: 'default green svg top'
    type: 'pcbdraw'
    dir: 'docs/img'
    options:
      bottom: false
      dnf_filter: ''
      dpi: 300
      format: 'svg'
      highlight: []
      libs: ['/usr/share/pcbdraw/footprints/KiCAD-base']
      mirror: false
      no_drillholes: false
      output: '%f-%i%v.%x'
      placeholder: false
      remap:
      show_components: none
      style: '/usr/share/pcbdraw/styles/jlcpcb-green-hasl.json'
      variant: ''
      vcuts: false
      warnings: 'none'
  - name: 'https://github.com/yaqwsx/PcbDraw'
    comment: 'default green svg bottom'
    type: 'pcbdraw'
    dir: 'docs/img'
    options:
      bottom: true
      dnf_filter: ''
      dpi: 300
      format: 'svg'
      highlight: []
      libs: ['/usr/share/pcbdraw/footprints/KiCAD-base']
      mirror: true
      no_drillholes: false
      output: '%f-%i%v.%x'
      placeholder: false
      remap:
      show_components: none
      style: '/usr/share/pcbdraw/styles/jlcpcb-green-hasl.json'
      variant: ''
      vcuts: false
      warnings: 'none'
  # --------------------
  # Gerbers
  # --------------------
  - name: "https://en.wikipedia.org/wiki/Gerber_format"
    comment: 'gerbers'
    type: 'gerber'
    dir: 'gerbers'
    options:
      create_gerber_job_file: false
      dnf_filter: ''
      exclude_edge_layer: true
      exclude_pads_from_silkscreen: false
      force_plot_invisible_refs_vals: false
      gerber_job_file: '%f-%i%v.%x'
      gerber_precision: 4.6
      line_width: 0.1
      output: '%f-%i%v.%x'
      plot_footprint_refs: true
      plot_footprint_values: true
      plot_sheet_reference: false
      subtract_mask_from_silk: false
      tent_vias: true
      use_aux_axis_as_origin: true
      use_gerber_net_attributes: true
      use_gerber_x2_attributes: true
      use_protel_extensions: false
      variant: ''
    layers: all
  - name: 'https://en.wikipedia.org/wiki/Gerber_format'
    comment: 'drill'
    type: gerb_drill
    dir: gerbers
    options:
      map:
        output: ''
        type: 'gerber'
      output: '%f-%i%v.%x'
      report:
        filename: '%i.%x'
      use_aux_axis_as_origin: false
  - name: 'https://en.wikipedia.org/wiki/Gerber_format'
    comment: 'drill excellon'
    type: "excellon"
    dir: "gerbers"
    options:
      map:
        output: '%f-%i%v.%x'
        type: 'gerber'
      metric_units: true
      minimal_header: false
      mirror_y_axis: false
      output: '%f-%i%v.%x'
      pth_and_npth_single_file: false
      report:
        filename: '%i.%x'
      use_aux_axis_as_origin: false
  # --------------------
  # Positioning
  # --------------------
  - name: 'link'
    comment: '*_pos.csv'
    type: 'position'
    dir: 'gerbers'
    options:
      dnf_filter: ''
      format: 'CSV'
      only_smd: true
      output: '%f-%i%v.%x'
      separate_files_for_front_and_back: false
      units: 'millimeters'
      variant: ''
  # --------------------
  # 3D Model
  # --------------------
  - name: 'https://www.freecadweb.org/'
    comment: '3D step model'
    type: 'step'
    dir: 'cad'
    options:
      dnf_filter: ''
      metric_units: true
      min_distance: -1
      no_virtual: false
      origin: 'grid'
      output: '%f.%x'
      variant: ''
  # --------------------
  # BoM
  # --------------------
  - name: 'https://github.com/SchrodingersGat/KiBoM'
    comment: 'bom.html'
    type: 'kibom'
    dir: 'docs/bom'
    options:
      conf:
        component_aliases: [['r', 'r_small', 'res', 'resistor'], ['l', 'l_small', 'inductor'], ['c', 'c_small', 'cap', 'capacitor'], ['sw', 'switch'], ['zener', 'zenersmall'], ['d', 'diode', 'd_small']]
        datasheet_as_link: 'Datasheet'
        digikey_link: ''
        exclude_any:
          - column: References
            regex: '^TP[0-9]*'
          - column: References
            regex: '^FID'
          - column: Part
            regex: 'mount.*hole'
          - column: Part
            regex: 'solder.*bridge'
          - column: Part
            regex: 'test.*point'
          - column: Footprint
            regex: 'test.*point'
          - column: Footprint
            regex: 'mount.*hole'
          - column: Footprint
            regex: 'fiducial'
          - column: References
            regex: 'LOGO'
        fit_field: 'Variant'
        group_connectors: true
        group_fields: ['Part', 'Part Lib', 'Value', 'Footprint', 'Footprint Lib']
        hide_headers: false
        hide_pcb_info: false
        html_generate_dnf: true
        ignore_dnf: true
        merge_blank_fields: true
        number_rows: true
        test_regex: true
        use_alt: false
      format: 'HTML'
      number: 1
      output: '%f-%i%v.%x'
      separator: ','
      variant: ''
  - name: 'https://github.com/SchrodingersGat/KiBoM'
    comment: 'bom.xlsx'
    type: 'kibom'
    dir: 'docs/bom'
    options:
      conf:
        component_aliases: [['r', 'r_small', 'res', 'resistor'], ['l', 'l_small', 'inductor'], ['c', 'c_small', 'cap', 'capacitor'], ['sw', 'switch'], ['zener', 'zenersmall'], ['d', 'diode', 'd_small']]
        datasheet_as_link: 'Datasheet'
        digikey_link: ''
        exclude_any:
          - column: References
            regex: '^TP[0-9]*'
          - column: References
            regex: '^FID'
          - column: Part
            regex: 'mount.*hole'
          - column: Part
            regex: 'solder.*bridge'
          - column: Part
            regex: 'test.*point'
          - column: Footprint
            regex: 'test.*point'
          - column: Footprint
            regex: 'mount.*hole'
          - column: Footprint
            regex: 'fiducial'
          - column: References
            regex: 'LOGO'
        fit_field: 'Variant'
        group_connectors: true
        group_fields: ['Part', 'Part Lib', 'Value', 'Footprint', 'Footprint Lib']
        hide_headers: false
        hide_pcb_info: false
        html_generate_dnf: true
        ignore_dnf: true
        merge_blank_fields: true
        number_rows: true
        test_regex: true
        use_alt: false
      format: 'XLSX'
      number: 1
      output: '%f-%i%v.%x'
      separator: ';'
      variant: ''
